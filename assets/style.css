* {
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    margin: 0 auto; /* Center the content horizontally */
    max-width: 1200px; /* Match the max width of images */
    padding: 32px 64px; /* 32px top/bottom, 64px left/right */
    text-align: left; /* Ensure text is left-aligned */
}

nav ul {
    list-style: none;
    padding: 0;
    text-align: center;
    margin: 0 0 96px 0; /* bottom margin */
}
nav li {
    display: inline-block;
    margin: 0 24px;
    padding: 0;
}
nav a {
    text-decoration: none;
    font-weight: bold;
    padding: 0;
}
img {
    max-width: 1200px;
    width: auto;
    height: auto;
    transition: opacity 0.3s ease;
}

/* Remove global horizontal clipping (was causing desktop truncation) */
html, body { overflow-x: visible; }

/* Base tooltip trigger */
.tooltip {
    position: relative;
    display: inline-block;
    text-decoration: underline dotted;
    text-decoration-color: var(--tooltip-accent);
    text-decoration-thickness: 2px;
    text-underline-offset: 3px;
    cursor: help;
}
.tooltip:focus-visible {
    outline: 2px solid #555;
    outline-offset: 2px;
}

/* Desktop tooltip */
.tooltip .tooltiptext {
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    width: 280px;
    max-width: min(280px, calc(100vw - 32px));
    background:#333;
    color:#fff;
    padding:8px 12px;
    border-radius:6px;
    font-size:13px;
    line-height:1.4;
    box-shadow:0 2px 8px rgba(0,0,0,.2);
    visibility:hidden;
    opacity:0;
    transition:opacity .25s;
    z-index:1000;
    overflow-wrap:anywhere;
}
.tooltip .tooltiptext::after {
    content:"";
    position:absolute;
    top:100%;
    left:50%;
    transform:translateX(-50%);
    border:6px solid transparent;
    border-top-color:#333; /* arrow points down toward trigger */
}
.tooltip:hover .tooltiptext,
.tooltip:focus-visible .tooltiptext {
    visibility:visible;
    opacity:1;
}

/* Mobile layout + tooltip */
@media (max-width:600px) {
    html, body { overflow-x:hidden; }
    body { padding:24px 16px; }

    img, video, iframe, embed {
        max-width:100% !important;
        width:100% !important;
        height:auto;
    }

    nav ul {
        display:flex;
        flex-wrap:wrap;
        justify-content:center;
        gap:8px 16px;
        margin:0 0 56px 0;
        padding:0;
    }
    nav li { margin:0; }
    nav a { font-size:14px; display:block; padding:4px 0; }

    /* Mobile tooltip overridden for JS positioning */
    .tooltip .tooltiptext {
        position:fixed;
        top:auto;
        bottom:auto;
        left:0;
        transform:none; /* JS sets precise left/top */
        margin:0;
        max-width:min(280px, calc(100vw - 16px));
        width:max-content;
        visibility:hidden;
        opacity:0;
        pointer-events:none;
        transition:opacity .18s;
        z-index:1200;
    }
    .tooltip.is-open .tooltiptext { pointer-events:auto; }

    /* Dynamic arrow (JS sets --arrow-left + pos class) */
    .tooltip .tooltiptext::after {
        content:"";
        position:absolute;
        left:var(--arrow-left,50%);
        transform:translateX(-50%);
        border:6px solid transparent;
        pointer-events:none;
    }
    .tooltip .tooltiptext.tooltip-pos-below::after {
        top:-12px;
        border-bottom-color:#333;
    }
    .tooltip .tooltiptext.tooltip-pos-above::after {
        bottom:-12px;
        border-top-color:#333;
    }

    /* Suppress hover activation on touch (override desktop rule) */
    .tooltip:hover .tooltiptext { visibility:hidden; opacity:0; }
}

/* Reduced motion */
@media (prefers-reduced-motion:reduce) {
    .tooltip .tooltiptext { transition:none; }
}

/* Theming variables */
:root {
    --theme-bg: #ffffff;
    --theme-fg: #000000;
    --tooltip-bg: #333;
    --tooltip-accent: #555;
    --tooltip-accent-hover: #222;
}

[data-theme="dark"] {
    --theme-bg: #111;
    --theme-fg: #f5f5f5;
    --tooltip-bg: #222;
    --tooltip-accent: #c9c9c9;
    --tooltip-accent-hover: #ffffff;
}

/* Apply */
body {
    background: var(--theme-bg);
    color: var(--theme-fg);
}

/* Use variable for tooltip background + arrows */
.tooltip .tooltiptext {
    background: var(--tooltip-bg);
}
.tooltip .tooltiptext::after {
    border-top-color: var(--tooltip-bg);
}
.tooltip .tooltiptext.tooltip-pos-below::after {
    border-bottom-color: var(--tooltip-bg);
}
.tooltip .tooltiptext.tooltip-pos-above::after {
    border-top-color: var(--tooltip-bg);
}

/* Remove old prefers-color-scheme overrides if still present */
@media (prefers-color-scheme: dark) {
    /* (Leave empty â€“ now handled by JS + data-theme) */
}

/* Fine pointer adjustment */
@media (pointer:fine) {
  .tooltip .tooltiptext {
    left: 50%;
    transform: translateX(-50%);
  }
  @supports (left: clamp(0px, 0px, 0px)) {
    .tooltip .tooltiptext {
      left: clamp(16px, 50%, calc(100vw - 16px));
    }
  }
}

.site-header {
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:16px;
    flex-wrap:wrap;
}

.site-nav {
    list-style:none;
    margin:0 0 96px 0; /* restores original bottom spacing */
    padding:0;
    display:flex;
    flex-wrap:wrap;
    gap:20px;
}

.theme-toggle {
    background:none;
    border:1px solid var(--tooltip-accent);
    padding:6px 12px;
    border-radius:20px;
    cursor:pointer;
    font:inherit;
}

/* Mobile adjustments */
@media (max-width:600px) {
    .site-nav {
        margin:0 0 56px 0;
        gap:14px;
    }
}
